<!-- Modulo de Armazones -->
<main>
    <div class="text-white barraSup text-center justify-content-center">
        <h2>Gestión de Armazones</h2>  
    </div>
    <div id="form" style="display: none;">
        <form action="" class="formulario" id="formulario">
            <!-- Datos identificadores -->
            <!-- Imagen -->
            <div class="sidebar ms-2 text-center" style="width: 186px; border-color: green; border-style: solid;">
                <div class="row mt-2">
                    <div class="col-12">
                        <img id="imgArm" src="" style="width:156px; height:156px;">
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12">
                        <button id="btnSeleccionarImgArm" class="btn btn-outline-success"><i class="fas fa-upload"></i>&nbsp;&nbsp;Cargar Imagen</button>
                    </div>
                </div>
                <div class="row mt-2">
                    <div class="col-12">
                        <input id="txtFotografia" type="file" class="fotografia">
                    </div>
                </div>
            </div>
            <!-- codigo de barras -->
            <div>
                <label for="txtCodigoB" class="formulario__label">Código de Barras</label>
                <div id="CodigoB">
                    <svg id="codigoBarraArm"></svg>
                </div>
            </div>
            <div class="Desactivado">
                <!-- ID de Producto -->
                <div>
                    <label for="txtIdProducto" class="formulario__label">ID Producto</label>
                    <input id="txtIdProducto" type="text" class="formulario__input"  readonly class="mt-2">
                </div>
                <!-- ID de Armazon -->
                <div>
                    <label for="txtIdArmazon" class="formulario__label">ID Armazon</label>
                    <input id="txtIdArmazon" type="text" class="formulario__input"  readonly class="mt-2">
                </div>
            </div>
            <!-- Nombre -->
            <div class="formulario__grupo" id="grupo__nombreAr">
                <label for="txtNombreArm" class="formulario__label">Nombre del Armazón</label>
                <div class="formulario__grupo" id="grupo__nombreAr">
                    <input id="txtNombreArm" type="text" name="nombreAr" class="formulario__input">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <!-- marca -->
            <div class="formulario__grupo" id="grupo__marca">
                <label for="txtMarcaArm" class="formulario__label">Marca</label> 
                <div class="formulario__grupo" id="grupo__marca">
                    <input type="text" class="formulario__input" name="marca" id="txtMarcaArm" placeholder="Marca">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <!-- modelo -->
            <div class="formulario__grupo" id="grupo__modelo">
                <label for="txtModelo" class="formulario__label">Modelo</label>
                <div class="formulario__grupo" id="grupo__modelo">
                    <input type="text" class="formulario__input" name="modelo" id="txtModelo" placeholder="Modelo"> 
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <!-- color -->
            <div class="formulario__grupo" id="grupo__color">
                <label for="txtColor" class="formulario__label">Color</label>
                <div class="formulario__grupo" id="grupo__color">
                    <input type="text" class="formulario__input" name="color" id="txtColor" placeholder="Color">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <!-- Descripción  -->
            <div class="formulario__grupo" id="grupo__descripcion">
                <label for="txtDesc" class="formulario__label">Descripción</label>
                <div class="formulario__grupo" id="grupo__descripcion">
                    <input type="text" class="formulario__input" name="descripcion" id="txtDesc" placeholder="Descripción">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <!-- precioVenta -->
            <div class="formulario__grupo" id="grupo__precioven">
                <label for="txtPrecioVenta" id="">Precio de Venta</label>
                <div class="formulario__grupo" id="grupo__precioven">
                    <input type="number" class="formulario__input" name="precioven" id="txtPrecioVenta" placeholder="Precio de Ventas">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">El precio de venta solo puede contener numeros</p>
            </div>
            <!-- precioCompra -->
            <div class="formulario__grupo" id="grupo__preciocom">
                <label for="txtPrecioCompra" id="">Precio de Compra</label>
                <div class="formulario__grupo" id="grupo__preciocom">
                    <input type="number" class="formulario__input" name="preciocom" id="txtPrecioCompra" placeholder="Precio de Compra">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">El precio de compra solo puede contener numeros</p>
            </div>
            <!-- Existencias -->
            <div class="formulario__grupo" id="grupo__existencias">
                <label for="txtExis" id="">Existencias</label>
                <div class="formulario__grupo" id="grupo__existencias">
                    <input type="number" class="formulario__input" name="existencias" id="txtExis" placeholder="Precio de Ventas">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Las existencias solo puede contener numeros</p>
            </div>
            <!-- Dimenciones -->
            <div class="formulario__grupo" id="grupo__dimencion">
                <label for="txtDimen" class="formulario__label">Dimenciones</label>
                <div class="formulario__grupo" id="grupo__dimencion">
                    <input type="text" class="formulario__input" name="dimencion" id="txtDimen" placeholder="Dimenciones">
                    <i class="formulario__validacion-estado fas fa-times-circle"></i>
                </div>
                <p class="formulario__input-error">Campo invalido, rellene correctamente el campo</p>
            </div>
            <div class="row">
                <div class="Desactivado col-12">
                    <div class="form-floating">
                        <textarea id="txtACodigoImageArm" class="form-control" placeholder=""></textarea>
                        <labe for="txtACodigoImage">CB64</labe>
                    </div>
                </div>
            </div>
        </form>
        <div class="d-flex justify-content-around botones">
            <button title="Agregar Armazon" class="btn btn-success btn-lg" onclick="moduloArmazones.guardarArmazon();" id="btnAddArm"><i class="fa fa-plus-square" aria-hidden="true"></i></button>
            <button title="Limpiar Formulario" class="btn btn-info btn-lg" onclick="moduloArmazones.limpiarFormulario();" id="btnCleanArm"><i class="fa fa-eraser" aria-hidden="true"></i></button>
            <button title="Borrar Armazon" class="btn btn-danger btn-lg disabled" onclick="moduloArmazones.borrarArmazon();" id="btnDeleteArm"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
        </div>
    </div>
    <hr>
    <div class="d-flex justify-content-between m-3">
        <div id="buscar">
            <label for="txtBusquedaArmazón" class="form-label mx-3">Buscar Armazón</label>
            <input type="text" id="txtBusquedaArmazon">
        </div>
        <div>
            <button id="desplegar">Agregar</button>
            <button id="listar" style="display: none;" class="learn-more">
                <span class="circle" aria-hidden="true">
                    <span class="icon arrow"></span>
                </span>
                <span class="button-text">Ver lista</span>
            </button>
        </div>
    </div>
    <table id="tablaArm" class="tabla table table-striped table-bordered table-hover">
        <thead class="table-dark">
            <tr>
                <th>Codigo de barras</th>
                <th>Nombre</th>
                <th>Marca</th>
                <th>Color</th>
                <th>Descricpción</th>
                <th>precioVenta</th>
                <th>precioCompra</th>
                <th>Existencias</th>
                <th>Estatus</th>
            </tr>               
        </thead>
        <tbody id="tblArmazones">
        </tbody>
    </table>
</main>
<script>
    // Variables
    const inputFile = document.querySelector('#txtFotografia');
    const image = document.querySelector('#img');

    /**
     * Returns a file in Base64URL format.
     * @param {File} file
     * @return {Promise<string>}
     */
    async function encodeFileAsBase64URL(file) {
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.addEventListener('loadend', () => {
                resolve(reader.result);
            });
            reader.readAsDataURL(file);
        });
    }
    ;

    // Eventos
    inputFile.addEventListener('input', async (event) => {
        // Convierto la primera imagen del input en una ruta Base64
        const base64URL = await encodeFileAsBase64URL(inputFile.files[0]);
        // Anyado la ruta Base64 a la imagen
        image.setAttribute('src', base64URL);
    });
</script>


